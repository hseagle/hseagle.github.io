{"categories":[{"title":"citus","uri":"https://hseagle.github.io/categories/citus/"},{"title":"PostgreSQL","uri":"https://hseagle.github.io/categories/postgresql/"}],"posts":[{"content":"PostgreSQL中锁机制及其原理\nPostgreSQL版本\u0026gt;9.6, 可以使用更为精简的查询\nselect pid, query_start, usename, pg_blocking_pids(pid) as blocked_by, query as blocked_query from pg_stat_activity where cardinality(pg_blocking_pids(pid)) \u0026gt; 0; ","id":0,"section":"posts","summary":"\u003cp\u003ePostgreSQL中锁机制及其原理\u003c/p\u003e","tags":null,"title":"PG死锁检测","uri":"https://hseagle.github.io/2021/07/pg-locks/","year":"2021"},{"content":"PostgreSQL有多种高可用的方案选择，在功能性和易用性两者平衡的角度来看, Patroni无疑是最成功的一款，本节会主要介绍一下patroni的安装配置和其背后基本原理。\n","id":1,"section":"posts","summary":"\u003cp\u003ePostgreSQL有多种高可用的方案选择，在功能性和易用性两者平衡的角度来看, Patroni无疑是最成功的一款，本节会主要介绍一下patroni的安装配置和其背后基本原理。\u003c/p\u003e","tags":["ha"],"title":"Patroni--首选的PG HA方案","uri":"https://hseagle.github.io/2021/07/patroni/","year":"2021"},{"content":"Citus是PostgreSQL目前已知水平扩容的插件中最成功的一款， 而且在2019年微软收购了该公司，足以证明该扩展的成功和流行，收购后citus的功能依然保持开源，所以这是一款值得使用并同时值得花时间研究的软件。\n","id":2,"section":"posts","summary":"\u003cp\u003eCitus是PostgreSQL目前已知水平扩容的插件中最成功的一款， 而且在2019年微软收购了该公司，足以证明该扩展的成功和流行，收购后citus的功能依然保持开源，所以这是一款值得使用并同时值得花时间研究的软件。\u003c/p\u003e","tags":["citus"],"title":"Citus扩展","uri":"https://hseagle.github.io/2021/07/pg-extension-citus/","year":"2021"},{"content":"SQL查询性能优化方法汇总\n","id":3,"section":"posts","summary":"\u003cp\u003eSQL查询性能优化方法汇总\u003c/p\u003e","tags":null,"title":"SQL查询性能优化","uri":"https://hseagle.github.io/2021/07/pg-sql-optimization/","year":"2021"},{"content":"本节涉及PostgreSQL的安装和运行， PostgreSQL历史悠久，Linux的各大发行版都对其支持友好，基本上都有编译好的二进制包直接可供下载安装。如果想亲自体验一下PostgreSQL的源码编译过程，那么就下载源码进行DIY，过程也不复杂。\n 源码安装 编译步骤 假设已经安装好gcc, g++以及make\n./configure make sudo make install  初始化 adduser postgres mkdir /usr/local/pgsql/data chown postgres /usr/local/pgsql/data su - postgres /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data /usr/local/pgsql/bin/pg_ctl -D /usr/local/pgsql/data -l logfile start /usr/local/pgsql/bin/createdb test /usr/local/pgsql/bin/psql test  安装结果验证 ps -ef|grep -i post sudo netstat -antpl|grep -i 5432  使用默认账户链接\npsql -Upostgres -dpostgres  CentOS7下安装 yum install postgresql13 postgresql13-server sudo systemctl enable postgresql-13 sudo /usr/pgsql-13/bin/postgresql-13-setup initdb sudo systemctl start postgresql-13  CentOS7下离线安装 以postgresql 13为例，找到安装包下载地址。https://download.postgresql.org/pub/repos/yum/13/redhat/，如果是在linux下可能采用lftp打开该地址，执行如下指令下载\nlftp https://download.postgresql.org/pub/repos/yum/13/redhat/rhel-7.12-x86_64/ mirror . /tmp/pg13_installer  下载完成之后，将安装包上传到目标机器，采用如下指令安装\nsudo yum -y install libicu sudo yum -y localinstall postgresql13-libs-13.2-1PGDG.rhel7.x86_64.rpm sudo yum -y localinstall ./postgresql13-13.2-1PGDG.rhel7.x86_64.rpm ./postgresql13-server-13.2-1PGDG.rhel7.x86_64.rpm sudo yum -y localinstall postgresql13-contrib-13.2-1PGDG.rhel7.x86_64.rpm sudo yum -y localinstall python3-psycopg2-2.8.5-1.rhel7.x86_64.rpm pg_partman_13-4.4.1-1.rhel7.x86_64.rpm pg_repack13-1.4.6-1.rhel7.x86_64.rpm  postgresql默认的数据目录是 /var/lib/pgsql/13/data, 如果要更换默认的文件夹， 需要修改文件 /usr/lib/systemd/system/postgresql-13.service 比如下面示例中，就将数据目录更换到 /pgsql/13/data。\n如果不更改默认指定目录，可以直接跳到数据库初始化步骤。\nEnvironment=PGDATA=/pgsql/13/data/  修改完成后执行\nsudo systemctl daemon-reload  数据库初始化 sudo /usr/pgsql-13/bin/postgresql-13-setup initdb  GUI BeeKeeper\n","id":4,"section":"posts","summary":"\u003cp\u003e本节涉及PostgreSQL的安装和运行， PostgreSQL历史悠久，Linux的各大发行版都对其支持友好，基本上都有编译好的二进制包直接可供下载安装。如果想亲自体验一下PostgreSQL的源码编译过程，那么就下载源码进行DIY，过程也不复杂。\u003c/p\u003e","tags":["postgresql"],"title":"PostgreSQL安装和运行","uri":"https://hseagle.github.io/2021/07/pg-install/","year":"2021"},{"content":"数据库过去是，现在是，将来肯定也是互联网技术中的热点和重点( 有押注的意味 ), 在开源数据中，以功能论PostgreSQL无疑是最强的，自从2014年以来，在db-engines.com排名中始终稳定在第4,声誉积分不断抬升，和SqlServer积分不断下滑趋势相比，很有可能在2-3年后， PostgreSQL会进入排名的top3。\n 基于如上判断，在日常工作中会尽量使用PostgreSQL, 并将积累的一些经验记录下来，以便总结和查询。\n","id":5,"section":"posts","summary":"\u003cp\u003e数据库过去是，现在是，将来肯定也是互联网技术中的热点和重点( \u003cstrong\u003e有押注的意味\u003c/strong\u003e ), 在开源数据中，以功能论PostgreSQL无疑是最强的，自从2014年以来，在db-engines.com排名中始终稳定在第4,声誉积分不断抬升，和SqlServer积分不断下滑趋势相比，很有可能在2-3年后， PostgreSQL会进入排名的top3。\u003c/p\u003e","tags":null,"title":"PG的明天值得期待","uri":"https://hseagle.github.io/2021/07/my-first-post/","year":"2021"}],"tags":[{"title":"citus","uri":"https://hseagle.github.io/tags/citus/"},{"title":"ha","uri":"https://hseagle.github.io/tags/ha/"},{"title":"postgresql","uri":"https://hseagle.github.io/tags/postgresql/"}]}